*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:#1a1a2e;color:#fff;min-height:100vh}.login-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:20px}.login-container h1{font-size:2.5rem;margin-bottom:2rem}.login-form{display:flex;flex-direction:column;gap:1rem;width:100%;max-width:300px}.login-form input{padding:12px 16px;border:2px solid #333;border-radius:8px;background:#16213e;color:#fff;font-size:1rem}.login-form button{padding:12px 24px;border:none;border-radius:8px;background:#e94560;color:#fff;font-size:1rem;cursor:pointer;transition:background .3s}.login-form button:hover{background:#c73e54}.app{max-width:1000px;margin:0 auto;padding:20px}header{text-align:center;margin-bottom:2rem}header h1{font-size:2rem;margin-bottom:1.5rem}.setup{display:flex;flex-direction:column;gap:1rem;align-items:center}.language-select,.gender-select{display:flex;gap:10px}.language-select button,.gender-select button{padding:12px 24px;border:2px solid #333;border-radius:8px;background:#16213e;color:#fff;font-size:1rem;cursor:pointer;transition:all .3s}.language-select button.active,.gender-select button.active{border-color:#e94560;background:#e94560}.options{margin:10px 0}.options label{display:flex;align-items:center;gap:8px;cursor:pointer}.options input[type=checkbox]{width:20px;height:20px;accent-color:#e94560}.start-btn,.end-btn{padding:14px 32px;border:none;border-radius:8px;font-size:1.1rem;cursor:pointer;transition:all .3s}.start-btn{background:#e94560;color:#fff;width:100%;max-width:300px}.start-btn:hover{background:#c73e54}.end-btn{background:#333;color:#fff;padding:8px 16px;font-size:.9rem}.end-btn:hover{background:#444}.compact-btn{background:#0f3460;color:#fff;padding:8px 16px;font-size:.9rem;border:none;border-radius:8px;cursor:pointer;transition:all .3s;margin-right:8px}.compact-btn:hover{background:#1a4a7a}.logout-btn{background:#666;color:#fff;padding:8px 16px;font-size:.9rem;margin-left:8px}.logout-btn:hover{background:#888}.session-info{display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between;align-items:center;padding:12px 16px;background:#16213e;border-radius:8px;margin-bottom:1rem}.session-info button{margin-left:8px}.messages{display:flex;flex-direction:column;gap:1rem;margin-bottom:1rem;max-height:400px;overflow-y:auto}.message{padding:12px 16px;border-radius:12px;max-width:80%}.message.assistant{background:#0f3460;align-self:flex-start}.message.user{background:#e94560;align-self:flex-end}.message .text{font-size:150%;line-height:1.6}.message .text ruby{font-size:100%}.message .text rt{font-size:50%}.message-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:.85rem}.role-badge{font-weight:700;opacity:.8}.translate-toggle{background:#fff3;border:none;padding:4px 8px;border-radius:4px;color:#fff;font-size:.75rem;cursor:pointer}.translate-toggle:hover{background:#ffffff4d}.audio-player{margin-top:8px}.play-btn{background:#fff3;border:none;padding:8px 16px;border-radius:20px;color:#fff;cursor:pointer;font-size:.9rem}.play-btn:hover{background:#ffffff4d}.play-btn.playing{background:#e94560;animation:pulse-red 1.5s infinite}.play-btn.playing:hover{background:#f44}@keyframes pulse-red{0%,to{box-shadow:0 0 #e94560b3}50%{box-shadow:0 0 0 10px #e9456000}}.input-area{display:flex;gap:10px;align-items:center}.input-area input{flex:1;padding:12px 16px;border:2px solid #333;border-radius:8px;background:#16213e;color:#fff;font-size:1rem}.input-area button{padding:12px 20px;border:none;border-radius:8px;background:#0f3460;color:#fff;font-size:1rem;cursor:pointer;transition:background .3s}.input-area button:hover{background:#1a4a7a}.help-text{text-align:center;color:#888;font-size:.9rem;margin-bottom:20px;padding:12px;background:#16213e;border-radius:8px;border:1px solid #333}.audio-loading{margin-top:8px;color:#888;font-size:.85rem}.loading-dots:after{content:"";animation:dots 1.5s steps(4,end) infinite}@keyframes dots{0%{content:""}25%{content:"."}50%{content:".."}75%{content:"..."}to{content:""}}.voice-recorder-section{margin-top:16px;padding:16px;background:#16213e;border-radius:12px;border:1px solid #333}.mode-toggle{display:flex;gap:8px;justify-content:center;margin-bottom:12px;background:#1a1a2e;padding:4px;border-radius:8px}.mode-toggle button{padding:8px 16px;border:none;border-radius:6px;background:transparent;color:#888;font-size:.85rem;cursor:pointer;transition:all .2s;flex:1}.furigana-text ruby{ruby-align:center}.furigana-text rt{font-size:.5em;color:#aaa}.toggle-furigana{background:#ffffff1a;border:none;padding:8px 16px;border-radius:20px;color:#aaa;cursor:pointer;font-size:.85rem;margin-top:8px}.toggle-furigana:hover{background:#fff3;color:#fff}.repeat-mode{max-width:600px}.mode-controls{display:flex;gap:10px;justify-content:center;margin-top:1rem}.mode-btn{background:#16213e;border:2px solid #333;padding:10px 20px;border-radius:8px;color:#fff;cursor:pointer;font-size:.9rem}.mode-btn:hover{background:#1a4a7a}.repeat-mode-btn,.lesson-mode-btn{background:#16213e!important;border:2px solid #e94560!important;color:#fff!important;margin-top:10px;padding:12px 24px;border-radius:8px;font-size:1rem;cursor:pointer;width:100%;max-width:300px;transition:all .3s}.repeat-mode-btn:hover,.lesson-mode-btn:hover{background:#e94560!important}.repeat-main{display:flex;flex-direction:column;gap:1.5rem;align-items:center}.phrase-card{background:#16213e;border-radius:16px;padding:2rem;width:100%;text-align:center}.phrase-display{font-size:2rem;margin-bottom:1rem;min-height:80px;display:flex;align-items:center;justify-content:center}.phrase-display .plain-text{font-size:2rem}.phrase-controls{margin-top:1rem}.play-btn.large{padding:14px 32px;font-size:1.1rem;background:#0f3460}.play-btn.large:hover{background:#1a4a7a}.result-card{background:#16213e;border-radius:16px;padding:1.5rem;width:100%;border:2px solid #333}.result-card.score-100{border-color:#4ade80;background:#4ade801a}.result-card.score-80{border-color:#60a5fa;background:#60a5fa1a}.result-card.score-50{border-color:#fbbf24;background:#fbbf241a}.result-card.score-0{border-color:#f87171;background:#f871711a}.score-display{display:flex;align-items:center;justify-content:center;gap:1rem;margin-bottom:1rem}.score-number{font-size:3rem;font-weight:700;color:#e94560}.feedback{font-size:1.2rem;color:#fff}.transcription-comparison{display:flex;flex-direction:column;gap:.5rem;font-size:.9rem}.transcription-comparison label{color:#888}.errors-section{margin-top:1rem;padding-top:1rem;border-top:1px solid #333}.errors-section label{display:block;color:#fbbf24;font-weight:600;margin-bottom:.5rem}.errors-section ul{list-style:none;padding:0;margin:0}.errors-section li{color:#ccc;padding:4px 0;padding-left:1.5rem;position:relative}.errors-section li:before{content:"â†’";position:absolute;left:0;color:#e94560}.result-phrase-section{margin:1rem 0;padding:1rem;background:#ffffff0d;border-radius:8px;text-align:center}.result-phrase-section label{display:block;color:#888;font-size:.8rem;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:1px}.result-furigana-text{font-size:150%!important;line-height:1.6;margin:.5rem 0}.result-furigana-text ruby{ruby-align:center}.result-furigana-text rt{font-size:50%;color:#888}.result-translation{margin-top:.75rem;padding-top:.75rem;border-top:1px solid rgba(255,255,255,.1);color:#4ade80;font-size:1rem;font-style:italic}.next-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;padding:16px 32px;border:none;border-radius:8px;background:#0f3460;color:#fff;font-size:1.1rem;cursor:pointer;min-height:64px}.next-btn:hover{background:#1a4a7a}.shortcut-hint{color:#888;font-size:.7rem;font-weight:400}.transcription-comparison .expected{color:#4ade80}.transcription-comparison .heard{color:#fbbf24}.repeat-controls{display:flex;gap:1rem;width:100%;justify-content:center;align-items:center}.record-btn.large{padding:20px 48px;font-size:1.3rem}.lesson-mode{max-width:900px;margin:0 auto;padding:20px}.lesson-header{display:flex;align-items:center;gap:16px;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid #333}.lesson-header h2{flex:1;font-size:1.8rem;color:#fff}.back-btn{background:#16213e;border:2px solid #333;color:#fff;padding:10px 16px;border-radius:8px;cursor:pointer;font-size:.9rem;transition:all .3s}.back-btn:hover{background:#1a4a7a;border-color:#0f3460}.start-chat-btn{background:#e94560;color:#fff;border:none;padding:10px 20px;border-radius:8px;font-weight:700;cursor:pointer;transition:all .3s}.start-chat-btn:hover{background:#c73e54}.lesson-count{color:#888;font-size:.9rem}.loading{text-align:center;padding:40px;color:#888}.lessons-list{display:flex;flex-direction:column;gap:12px;max-height:calc(100vh - 200px);overflow-y:auto;padding-right:8px}.lessons-list::-webkit-scrollbar{width:8px}.lessons-list::-webkit-scrollbar-track{background:#1a1a2e;border-radius:4px}.lessons-list::-webkit-scrollbar-thumb{background:#333;border-radius:4px}.lessons-list::-webkit-scrollbar-thumb:hover{background:#e94560}.lesson-card{background:#16213e;border:2px solid #333;border-radius:12px;padding:16px 20px;cursor:pointer;transition:all .3s}.lesson-card:hover{background:#0f3460;border-color:#e94560;transform:translate(4px)}.lesson-card-header{display:flex;flex-direction:column;gap:4px;margin-bottom:8px}.lesson-card-header .lesson-date{font-size:.8rem;color:#888}.lesson-card-header .lesson-title{font-size:1.1rem;font-weight:700;color:#fff}.lesson-card-stats{display:flex;gap:16px;font-size:.85rem;color:#aaa;margin-bottom:8px}.lesson-topics{font-size:.8rem;color:#888;font-style:italic}.topic-tag{background:#e9456033;padding:4px 10px;border-radius:12px;font-size:.75rem;color:#e94560}.lesson-tabs{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap}.lesson-tabs button{background:#16213e;border:2px solid #333;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;font-size:.9rem;transition:all .3s}.lesson-tabs button.active{border-color:#e94560;background:#e94560}.lesson-tabs button:hover:not(.active){background:#1a4a7a}.furigana-toggle{margin-bottom:16px}.furigana-toggle label{display:flex;align-items:center;gap:8px;cursor:pointer;color:#aaa}.furigana-toggle input{width:18px;height:18px;accent-color:#e94560}.lesson-content{background:#16213e;border:2px solid #333;border-radius:12px;padding:24px}.info-card{background:#0f3460;padding:16px;border-radius:8px;margin-bottom:20px;border:1px solid #333}.info-card h3{margin-bottom:12px;color:#e94560}.info-card p{margin-bottom:8px;color:#ccc}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin-bottom:24px}.stat-card{background:#1a1a2e;padding:20px;border-radius:8px;text-align:center;border:1px solid #333}.stat-number{display:block;font-size:2.5rem;font-weight:700;color:#e94560}.stat-label{font-size:.85rem;color:#888}.quick-start{text-align:center;padding:24px;background:#e945601a;border-radius:12px;border:2px solid #e94560}.quick-start h3{margin-bottom:16px;color:#e94560}.big-button{background:#e94560;color:#fff;border:none;padding:16px 32px;border-radius:8px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .3s}.big-button:hover{background:#c73e54}.vocab-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}.vocab-card{background:#1a1a2e;padding:16px;border-radius:8px;border:1px solid #333;transition:all .2s}.vocab-card:hover{border-color:#e94560}.vocab-card .jp-word{font-size:1.3rem;margin-bottom:4px;color:#fff}.vocab-card .reading{font-size:.85rem;color:#888;margin-bottom:8px}.vocab-card .meaning{font-size:.95rem;color:#ccc}.type-tag{display:inline-block;background:#0f3460;padding:2px 8px;border-radius:4px;font-size:.75rem;color:#aaa;margin-top:8px}.grammar-card{background:#1a1a2e;padding:20px;border-radius:8px;border:1px solid #333;margin-bottom:16px}.grammar-card h4{font-size:1.2rem;color:#e94560;margin-bottom:8px}.grammar-card .explanation{color:#ccc;margin-bottom:16px;line-height:1.6}.grammar-card .explanation p{margin:4px 0}.grammar-card .explanation .table-line{font-family:monospace;font-size:.9rem;white-space:pre-wrap;background:#0f1a30;padding:4px 8px;border-radius:4px}.grammar-card .explanation .table-separator{color:#666}.grammar-table{width:100%;border-collapse:collapse;margin:12px 0;background:#0f1a30;border-radius:8px;overflow:hidden;font-size:.9rem}.grammar-table td{padding:10px 12px;border:1px solid #1a3a5c;vertical-align:top}.grammar-table tr:first-child td{background:#1a3a5c;font-weight:700;color:#fff}.grammar-table tr:nth-child(2n) td{background:#1a3a5c4d}.grammar-card .examples{background:#0f3460;padding:12px;border-radius:8px}.grammar-card .examples h5{margin-bottom:8px;color:#888}.example{padding:8px 0;border-bottom:1px solid #333}.example:last-child{border-bottom:none}.example .jp{display:block;font-size:1.1rem;margin-bottom:4px;color:#fff}.example .en{font-size:.85rem;color:#888}.practice-tab h3{margin-bottom:16px;color:#fff}.phrases-list{display:flex;flex-direction:column;gap:8px}.phrase-item{display:flex;gap:12px;padding:12px;background:#1a1a2e;border-radius:8px;align-items:center;border:1px solid #333}.phrase-item .number{color:#e94560;font-size:.9rem;min-width:24px;font-weight:700}.phrase-item .phrase{font-size:1.1rem;color:#fff}ruby{ruby-align:center}rt{font-size:.5em;color:#aaa}.voice-recorder{display:flex;flex-direction:column;align-items:center;gap:12px;width:100%}.audio-meter{width:100%;max-width:300px;height:8px;background:#1a1a2e;border-radius:4px;overflow:hidden;border:1px solid #333}.audio-level{height:100%;background:linear-gradient(90deg,#4ade80,#22c55e 50%,#fbbf24 80%,#e94560);transition:width .03s ease-out;border-radius:4px}.audio-level.speaking{background:linear-gradient(90deg,#4ade80,#22c55e,#e94560);box-shadow:0 0 10px #4ade8080}.mode-indicator{font-size:.85rem;color:#888;min-height:20px;text-align:center}.vad-status{display:flex;align-items:center;gap:8px}.voice-detected{color:#4ade80;font-weight:700;animation:pulse .5s infinite}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.record-button,.record-btn{padding:16px 32px;border:2px solid #e94560;border-radius:50px;background:#16213e;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s;min-width:200px;user-select:none;-webkit-user-select:none;touch-action:manipulation}.record-button:hover:not(:active),.record-btn:hover{background:#e9456033;transform:scale(1.02)}.record-button.recording,.record-btn.recording{background:#e94560}.record-button.recording.speaking,.record-btn.speaking{background:linear-gradient(135deg,#e94560,#4ade80);box-shadow:0 0 30px #4ade8099;transform:scale(1.05);transition:all .3s ease-out}.record-button,.record-btn{transition:all .3s ease-out}@keyframes recording-pulse{0%,to{box-shadow:0 0 #e94560b3}50%{box-shadow:0 0 0 15px #e9456000}}.record-button:active{transform:scale(.98)}.instructions{color:#666;font-size:.8rem;text-align:center;margin-bottom:16px}.instructions small{display:block}.mode-toggle{display:flex;gap:8px;background:#16213e;padding:4px;border-radius:8px;border:1px solid #333}.mode-toggle button{padding:8px 16px;border:none;border-radius:6px;background:transparent;color:#888;font-size:.85rem;cursor:pointer;transition:all .2s}.mode-toggle button.active{background:#e94560;color:#fff}.mode-toggle button:hover:not(.active){color:#fff}
